# Darkroom - 黑暗小屋生存游戏

一个基于Vue 3和Pinia的生存策略游戏，玩家需要在黑暗的小屋里生存，收集资源、建造村落、管理村民工作，探索未知的世界。

## 功能特性

### 核心系统
- **资源收集**：木材、石头等基础资源的手动收集
- **建筑系统**：建造小屋、陷阱等设施
- **制造系统**：制作工具如石斧、板车等
- **工作系统**：为村民分配伐木工、采石工、猎人等工作
- **村落管理**：管理人口增长和村落发展
- **探索系统**：二维地图+文字模式的探索功能

### 特色功能
- **暗黑模式**：支持暗黑模式切换
- **导入导出**：游戏存档的导入导出功能
- **冷却系统**：资源收集和陷阱检查的冷却机制
- **日志系统**：不同类型的日志提示（普通、主线、警示）
- **自动资源增长**：货车和村民工作的自动资源增长
- **响应式设计**：适配不同屏幕尺寸

## 技术栈

- **前端框架**：Vue 3 (Composition API + Script Setup)
- **状态管理**：Pinia
- **构建工具**：Vite
- **样式预处理器**：Less
- **事件系统**：自定义EventBus
- **包管理器**：Yarn / NPM

## 项目结构

```
darkroom/
├── src/
│   ├── components/         # 通用组件
│   ├── config/            # 游戏配置
│   ├── layouts/           # 布局组件
│   │   └── modules/       # 功能模块
│   ├── stores/            # Pinia状态管理
│   ├── styles/            # 样式文件
│   ├── utils/             # 工具函数
│   ├── App.vue            # 根组件
│   ├── main.js            # 入口文件
│   └── style.less         # 全局样式
├── index.html             # HTML模板
├── package.json           # 项目配置
├── vite.config.js         # Vite配置
└── README.md              # 项目说明
```

## 安装与运行

### 环境要求
- Node.js 14.0+
- Yarn 1.22+ 或 NPM 6.0+

### 安装依赖

```bash
# 使用 Yarn
yarn install

# 或使用 NPM
npm install
```

### 启动开发服务器

```bash
# 使用 Yarn
yarn serve

# 或使用 NPM
npm run serve
```

开发服务器启动后，访问 `http://localhost:5173/` 即可开始游戏。

### 构建生产版本

```bash
# 使用 Yarn
yarn build

# 或使用 NPM
npm run build
```

构建产物将生成在 `dist` 目录中。

## 游戏玩法

### 初始任务
1. 收集木材并点燃火堆取暖
2. 收集资源解锁村落
3. 建造小屋吸引村民
4. 为村民分配工作

### 资源管理
- **木材**：用于建造和制作工具
- **石头**：用于建造和制作工具
- **生肉**：通过陷阱或猎人获得
- **毛皮**：通过陷阱或猎人获得
- **熏肉**：通过熏肉师加工生肉获得
- **皮革**：通过皮革师加工毛皮获得

### 工作分配
- **伐木工**：生产木材
- **采石工**：生产石头
- **猎人**：生产生肉和毛皮
- **熏肉师**：将生肉加工为熏肉
- **皮革师**：将毛皮加工为皮革

### 建筑升级
- **小屋**：增加村落人口上限
- **陷阱**：自动捕获猎物
- **货车**：提高资源收集效率
- **狩猎小屋**：解锁猎人和熏肉师工作
- **制革小屋**：解锁皮革师工作
- **工坊**：解锁制造功能

## 游戏机制

### 自动资源增长
- **货车**：每10秒自动增加木材和石头
- **村民工作**：根据分配的工作自动生产对应资源

### 冷却系统
- **资源收集**：每次收集后有短暂冷却
- **陷阱检查**：检查陷阱后有冷却时间

### 人口增长
- 建造小屋后会吸引村民到来
- 人口增长有上限，取决于村落等级

### 探索系统
- 村落等级达到10级后解锁
- 二维地图+文字模式的探索
- 包含解密收集功能和闲散人员选择机制

## 开发说明

### 代码规范
- 使用ESLint进行代码检查
- 遵循Vue 3 Composition API最佳实践
- 组件命名使用PascalCase
- 文件命名使用kebab-case

### 状态管理
- 使用Pinia进行状态管理
- 核心游戏状态集中在gameStore
- 使用provide/inject进行组件间数据传递

### 样式管理
- 使用Less预处理器
- 全局变量定义在variable.less
- 组件样式使用scoped

## 未来规划

- [ ] 更多探索场景和事件
- [ ] 贸易系统
- [ ] 科技树系统
- [ ] 成就系统
- [ ] 多人游戏模式
- [ ] 移动应用版本

## 贡献

欢迎提交Issue和Pull Request来帮助改进这个项目！

## 许可证

MIT License

## 致谢

感谢所有为这个项目做出贡献的开发者！

---

**享受游戏！** 🌙
